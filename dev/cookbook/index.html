<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Revise usage: a cookbook · Revise.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Revise.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Revise.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../config/">Configuration</a></li><li class="is-active"><a class="tocitem" href>Revise usage: a cookbook</a><ul class="internal"><li><a class="tocitem" href="#Package-centric-usage-1"><span>Package-centric usage</span></a></li><li><a class="tocitem" href="#includet-usage-1"><span><code>includet</code> usage</span></a></li></ul></li><li><a class="tocitem" href="../limitations/">Limitations</a></li><li><a class="tocitem" href="../debugging/">Debugging Revise</a></li><li><a class="tocitem" href="../internals/">How Revise works</a></li><li><a class="tocitem" href="../user_reference/">User reference</a></li><li><a class="tocitem" href="../dev_reference/">Developer reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Revise usage: a cookbook</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Revise usage: a cookbook</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/timholy/Revise.jl/blob/master/docs/src/cookbook.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Revise-usage:-a-cookbook-1"><a class="docs-heading-anchor" href="#Revise-usage:-a-cookbook-1">Revise usage: a cookbook</a><a class="docs-heading-anchor-permalink" href="#Revise-usage:-a-cookbook-1" title="Permalink"></a></h1><h2 id="Package-centric-usage-1"><a class="docs-heading-anchor" href="#Package-centric-usage-1">Package-centric usage</a><a class="docs-heading-anchor-permalink" href="#Package-centric-usage-1" title="Permalink"></a></h2><p>For code that might be useful more than once, it&#39;s often a good idea to put it in a package. Revise cooperates with the package manager to enforce its distinction between <a href="https://julialang.github.io/Pkg.jl/v1/managing-packages/">&quot;versioned&quot; and &quot;under development&quot; packages</a>; packages that you want to modify and have tracked by <code>Revise</code> should be <code>dev</code>ed rather than <code>add</code>ed.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You should never modify package files in your <code>.julia/packages</code> directory, because this breaks the &quot;contract&quot; that such package files correspond to registered versions of the code. In recent versions of Julia, the source files in <code>.julia/packages</code> are read-only, and you should leave them this way.</p><p>In keeping with this spirit, Revise is designed to avoid tracking changes in such files. The correct way to make and track modifications is to <code>dev</code> the package.</p></div></div><p>For creating packages, the author recommends <a href="https://github.com/invenia/PkgTemplates.jl">PkgTemplates.jl</a>. A fallback is to use &quot;plain&quot; <code>Pkg</code> commands. Both options are described below.</p><h3 id="PkgTemplates-1"><a class="docs-heading-anchor" href="#PkgTemplates-1">PkgTemplates</a><a class="docs-heading-anchor-permalink" href="#PkgTemplates-1" title="Permalink"></a></h3><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Because PkgTemplates integrates nicely with <a href="https://git-scm.com/"><code>git</code></a>, this approach might require you to do some configuration. (Once you get things set up, you shouldn&#39;t have to do this part ever again.) PkgTemplates needs you to configure your <code>git</code> user name and email. Some instructions on configuration are <a href="https://docs.github.com/en/github/getting-started-with-github/set-up-git">here</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">here</a>. It&#39;s also helpful to sign up for a <a href="https://github.com/">GitHub account</a> and set git&#39;s <code>github.user</code> variable. The <a href="https://invenia.github.io/PkgTemplates.jl/stable/">PkgTemplates documentation</a> may also be useful.</p><p>If you struggle with this part, consider trying the &quot;plain&quot; <code>Pkg</code> variant below.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If the current directory in your Julia session is itself a package folder, PkgTemplates will use it as the parent environment (project) for your new package. To reduce confusion, before trying the commands below it may help to first ensure you&#39;re in a a &quot;neutral&quot; directory, for example by typing <code>cd()</code> at the Julia prompt.</p></div></div><p>Let&#39;s create a new package, <code>MyPkg</code>, to play with.</p><pre><code class="language-julia">julia&gt; using PkgTemplates

julia&gt; t = Template()
Template:
  → User: timholy
  → Host: github.com
  → License: MIT (Tim Holy &lt;tim.holy@gmail.com&gt; 2019)
  → Package directory: ~/.julia/dev
  → Minimum Julia version: v1.0
  → SSH remote: No
  → Add packages to main environment: Yes
  → Commit Manifest.toml: No
  → Plugins: None

julia&gt; t(&quot;MyPkg&quot;)
Generating project MyPkg:
    /home/tim/.julia/dev/MyPkg/Project.toml
    /home/tim/.julia/dev/MyPkg/src/MyPkg.jl
[lots more output suppressed]</code></pre><p>In the first few lines you can see the location of your new package, here the directory <code>/home/tim/.julia/dev/MyPkg</code>.</p><p>Before doing anything else, let&#39;s try it out:</p><pre><code class="language-julia">julia&gt; using Revise   # you must do this before loading any revisable packages

julia&gt; using MyPkg
[ Info: Precompiling MyPkg [102b5b08-597c-4d40-b98a-e9249f4d01f4]

julia&gt; MyPkg.greet()
Hello World!</code></pre><p>(It&#39;s perfectly fine if you see a different string of digits and letters after the &quot;Precompiling MyPkg&quot; message.) You&#39;ll note that Julia found your package without you having to take any extra steps.</p><p><em>Without</em> quitting this Julia session, open the <code>MyPkg.jl</code> file in an editor. You might be able to open it with</p><pre><code class="language-julia">julia&gt; edit(pathof(MyPkg))</code></pre><p>although that might require <a href="https://askubuntu.com/questions/432524/how-do-i-find-and-set-my-editor-environment-variable">configuring your EDITOR environment variable</a>.</p><p>You should see something like this:</p><pre><code class="language-julia">module MyPkg

greet() = print(&quot;Hello World!&quot;)

end # module</code></pre><p>This is the basic package created by PkgTemplates. Let&#39;s modify <code>greet</code> to return a different message:</p><pre><code class="language-julia">module MyPkg

greet() = print(&quot;Hello, revised World!&quot;)

end # module</code></pre><p>Now go back to that same Julia session, and try calling <code>greet</code> again. After a pause (while Revise&#39;s internal code compiles), you should see</p><pre><code class="language-julia">julia&gt; MyPkg.greet()
Hello, revised World!</code></pre><p>From this point forward, revisions should be fast. You can modify <code>MyPkg.jl</code> quite extensively without quitting the Julia session, although there are some <a href="../limitations/#Limitations-1">Limitations</a>.</p><h3 id="Using-Pkg-1"><a class="docs-heading-anchor" href="#Using-Pkg-1">Using Pkg</a><a class="docs-heading-anchor-permalink" href="#Using-Pkg-1" title="Permalink"></a></h3><p><a href="https://julialang.github.io/Pkg.jl/v1/">Pkg</a> works similarly to <code>PkgTemplates</code>, but requires less configuration while also doing less on your behalf. Let&#39;s create a blank <code>MyPkg</code> using <code>Pkg</code>. (If you tried the <code>PkgTemplates</code> version above, you might first have to delete the package with <code>Pkg.rm(&quot;MyPkg&quot;)</code> following by a complete removal from your <code>dev</code> directory.)</p><pre><code class="language-julia">julia&gt; using Pkg

julia&gt; cd(Pkg.devdir())   # take us to the standard &quot;development directory&quot;

(v1.2) pkg&gt; generate MyPkg
Generating project MyPkg:
    MyPkg/Project.toml
    MyPkg/src/MyPkg.jl

(v1.2) pkg&gt; dev MyPkg
[ Info: resolving package identifier `MyPkg` as a directory at `~/.julia/dev/MyPkg`.
...</code></pre><p>For the line starting <code>(v1.2) pkg&gt;</code>, hit the <code>]</code> key at the beginning of the line, then type <code>generate MyPkg</code>. The next line, <code>dev MyPkg</code>, is necessary to tell <code>Pkg</code> about the existence of this new package.</p><p>Now you can do the following:</p><pre><code class="language-julia">julia&gt; using MyPkg
[ Info: Precompiling MyPkg [efe7ebfe-4313-4388-9b6c-3590daf47143]

julia&gt; edit(pathof(MyPkg))</code></pre><p>and the rest should be similar to what&#39;s above under <code>PkgTemplates</code>. Note that with this approach, <code>MyPkg</code> has not been set up for version control.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you <code>add</code> instead of <code>dev</code> the package, the package manager will make a copy of the <code>MyPkg</code> files in your <code>.julia/packages</code> directory. This will be the &quot;official&quot; version of the files, and Revise will not track changes.</p></div></div><h2 id="includet-usage-1"><a class="docs-heading-anchor" href="#includet-usage-1"><code>includet</code> usage</a><a class="docs-heading-anchor-permalink" href="#includet-usage-1" title="Permalink"></a></h2><p>The alternative to creating packages is to manually load individual source files. This approach is intended for early stages of development; if you want to track multiple files and/or have some files include other files, you should consider switching to the package style above.</p><p>Open your editor and create a file like this:</p><pre><code class="language-julia">mygreeting() = &quot;Hello, world!&quot;</code></pre><p>Save it as <code>mygreet.jl</code> in some directory. Here we will assume it&#39;s being saved in <code>/tmp/</code>.</p><p>Now load the code with <code>includet</code>, which stands for &quot;include and track&quot;:</p><pre><code class="language-julia">julia&gt; using Revise

julia&gt; includet(&quot;/tmp/mygreet.jl&quot;)

julia&gt; mygreeting()
&quot;Hello, world!&quot;</code></pre><p>Now, in your editor modify <code>mygreeting</code> to do this:</p><pre><code class="language-julia">mygreeting() = &quot;Hello, revised world!&quot;</code></pre><p>and then try it in the same session:</p><pre><code class="language-julia">julia&gt; mygreeting()
&quot;Hello, revised world!&quot;</code></pre><p>As described above, the first revision you make may be very slow, but later revisions should be fast.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../config/">« Configuration</a><a class="docs-footer-nextpage" href="../limitations/">Limitations »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 2 April 2023 08:14">Sunday 2 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
